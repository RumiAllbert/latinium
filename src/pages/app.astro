---
import TopBar from "../components/app/TopBar.tsx";
import Workspace from "../components/app/Workspace.tsx";
import MainLayout from "../layouts/MainLayout.astro";
---

<MainLayout
  title="Latinium.ai â€“ Analysis Workspace"
  description="Interactive Latin analysis workspace with sentence-by-sentence exploration, tutoring, and quizzes."
>
  <div
    class="flex flex-col min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"
    style={{ color: "var(--fg)" }}
  >
    <TopBar client:load />

    <main class="flex-1 pt-16">
      <Workspace client:load />
    </main>
  </div>

  <script>
    // Initialize storage data when the app loads
    document.addEventListener("DOMContentLoaded", () => {
      // This will be handled by the React components via the store
      // We need to ensure the page doesn't have hydration issues
    });

    // Auto-analyze text if coming from library
    if (
      typeof window !== "undefined" &&
      window.location.search.includes("autoAnalyze=true")
    ) {
      // The React component will handle the auto-analysis
    }
  </script>
</MainLayout>
